language: python
python:
- '3.6'
- '3.8'
cache: pip
install:
- pip install -r requirements.txt
script:
- python -m unittest discover -v
- coverage run  -m unittest discover
- coverage report  src/hello/*
- python setup.py sdist
before_deploy:
- export RELEASE_PKG_FILE=$(ls dist/hello-*.tar.gz)
- echo "deploying $RELEASE_PKG_FILE to GitHub releases"
deploy:
  provider: releases
  file_glob: true
  file: "${RELEASE_PKG_FILE}"
  skip_cleanup: 'true'
  on:
    tags: true
  api_key:
    secure: BdpyI4PACzlWhWS4/Rhhrx7CAb3zWOXqewiSXvUo20SwSPNwTeCsQDIOmnN+dUNANn8ThgJ3f5LzttrIOtVJBPoQs6qnuQrhdRtex4VYNVaAA7K0RFE+a9rIrFGk+gqpVU52Gt/0K5IleW9wCfcHSBGPhz1/Bh16V08juGuR1N+EfTPZEZWH/JwvgwPO9hR8fxUN23f/tExxM0QVnx3lV2DRdKEtzDM5seToIv9GM1hlIOpFrPi3PtqqJfYZZZ+us9jxRDQIQs3aHkGzWa1CJJM1XY6JlUu51oNyzvJ8ribQGv+VXJYdHjfktcA3Kc3Srmv03HdnDy98lcb2MdfsNFK6wkK/BcmTyxkgNvhysDWIBvmFTkVqfMJqUOOZ1la7eGp2gKZ6z+qrCJlHUwyGy26vBv3Ne7367RUEok3quXczKFEyJfAHl1knABXJ6YxECI7ay9wqbchCXU3YY48cTW288foE74IZyVF5BunbverFZNXlbrA/0NBvyH449L+FXX7NR3hKXOYmvQMDg3+k7sZWVI53ioDZDzb/WOb/RRbRfmMhjx1ujnQn2vmkIq9IeyDbKwlm80vU7GV16o0IdQhrqTWhMiRcQC3mdtci+ayUpeVNCsvcAQs0bxI5Kcs3ucg5UUNXEosF2g/9wDtNyznfMxsMW6hjjwbysPNCgig=
